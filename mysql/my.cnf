[mysqld]
# CONNECTION SETTINGS
max_connections = 100                 # Reduziert von 200
wait_timeout = 28800
interactive_timeout = 28800

# BUFFER SETTINGS
innodb_buffer_pool_size = 256M       # Hauptspeicher-Cache für InnoDB
innodb_buffer_pool_instances = 1     # Für Server mit weniger RAM
max_allowed_packet = 16M             # Reduziert von default

# CACHE SETTINGS
table_open_cache = 2000
thread_cache_size = 10
query_cache_type = 0                 # Deaktiviert den Query Cache
query_cache_size = 0                 # Kein Speicher für Query Cache

# INNODB SETTINGS
innodb_flush_method = O_DIRECT       # Vermeidet doppeltes Buffering
innodb_flush_log_at_trx_commit = 2   # Etwas weniger ACID-konform, aber bessere Performance
innodb_file_per_table = 1           
innodb_log_buffer_size = 8M          # Reduziert von default
innodb_log_file_size = 128M         

# LOGGING
slow_query_log = 1
long_query_time = 2
slow_query_log_file = /var/log/mysql/slow.log

# PERFORMANCE SCHEMA - Reduziert Memory Usage
performance_schema = ON
performance_schema_max_table_instances = 1000
performance_schema_max_table_handles = 1000
performance_schema_accounts_size = 100
performance_schema_hosts_size = 100
performance_schema_users_size = 100
performance_schema_max_mutex_instances = 5000
performance_schema_max_rwlock_instances = 5000